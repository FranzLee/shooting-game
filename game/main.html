<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta charset="utf-8"/>
        <link rel="stylesheet" type="text/css" href="ShootingGame.css"/>
        <title>shooting game</title>
    </head>
    <body onload="startGame()">
        
    <script>  
    var player;
    var score=0;
    var bullet = [];
    var target;
    
    
    function startGame() {
        myGameArea.start();
        player = new component(100, 100, "gun.png", 5, 255,"image");   //x max: 930    y max:510
        
        window.addEventListener("keydown", function(e) {
        if(e.code == "Space") {
            bullet.push(new component(40, 40, "bullet.png", player.x + 100, player.y + 5,"image"));bullet[bullet.length - 1].speedX = 5;
        }
        })
        
    }

    var myGameArea = {
        canvas : document.createElement("canvas"),
        start : function() {
            this.canvas.width = 960;
            this.canvas.height = 540;
            this.context = this.canvas.getContext("2d");
            document.body.insertBefore(this.canvas, document.body.childNodes[0]);
            this.interval = setInterval(updateGameArea, 10);
            window.addEventListener('keydown', function (e) {myGameArea.key = e.keyCode;})
            window.addEventListener('keyup', function (e) {myGameArea.key = false;})
            
        },
        clear : function() {
            this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
        }
        
    }
    function component(width, height, color, x, y, type) {
        if (type == "image"){
            this.image = new Image();
            this.image.src = color;
        }

        this.width = width;
        this.height = height;
        this.x = x;
        this.y = y;
        this.speedX = 0;
        this.speedY = 0;
        this.update = function(){
            ctx = myGameArea.context;
            if (type == "image") {
                ctx.drawImage(
                    this.image,
                    this.x,
                    this.y,
                    this.width,
                    this.height);
                } 
                else {
                ctx.fillStyle = color;
                ctx.fillRect(this.x, this.y, this.width, this.height);
                }
            }
            this.newPos = function(){
                this.x += this.speedX;
                this.y += this.speedY;
            }
        }
    function updateGameArea() {
        myGameArea.clear();
        player.newPos();
        player.update();
        player.speedX = 0;
        player.speedY = 0;
        for(i = 0; i < bullet.length; i++) {
            bullet[i].update();
            bullet[i].newPos();
            
        }
        
        
        if (myGameArea.key && myGameArea.key == 38) {player.speedY = -1; }
        if (myGameArea.key && myGameArea.key == 40) {player.speedY = 1; }
        if (myGameArea.key && myGameArea.key == 32) {bullet.speedX = 1;}
    }
    
    
    
    
    
    
    function moveup(){
        player.speedY --;
    }
    

    function movedown(){
        player.speedY ++;
    }
    
    function stopMove() {
        myGamePiece.speedX = 0;
        myGamePiece.speedY = 0;
    }
    
    </script>
    
    <button onmousedown="moveup()" onmouseup="stopMove()" ontouchstart="moveup()">UP</button>
    <button onmousedown="movedown()" onmouseup="stopMove()" ontouchstart="movedown()">DOWN</button>
    
    </body>
</html>